# Story 1.2: Sign Up Page (Email & Password)

## Status
Ready for Review

## Agent Model Used
Claude Opus 4.5 (claude-opus-4-5-20251101)

## Parent Epic
[Epic 1: User Authentication & Profile](../epic-1-authentication.md)

## Story
**As a** new user,
**I want to** create an account using email/password,
**So that** I can save my learning progress

## Acceptance Criteria
1. `/sign-up` route renders registration form
2. Email/password registration with validation
3. Name field (optional)
4. Password requirements enforced (8+ chars, 1 uppercase, 1 number)
5. Email format validation
6. Duplicate email shows clear error
7. Success redirects to `/onboarding` (or `/dashboard` if onboarding complete)
8. Analytics event: `signup_started`, `signup_completed`

## Tasks / Subtasks
- [ ] Create SignUp page component (AC: 1)
  - [ ] Create `apps/web/src/pages/SignUp.tsx`
  - [ ] Add route `/sign-up` in routes.tsx
- [ ] Build registration form (AC: 2, 3)
  - [ ] Add email input field (required)
  - [ ] Add password input field (required)
  - [ ] Add name input field (optional)
  - [ ] Add submit button with loading state
- [ ] Implement form validation (AC: 4, 5)
  - [ ] Use registerSchema from @plpg/shared/validation
  - [ ] Display password requirements hint
  - [ ] Show validation errors inline
- [ ] Handle form submission (AC: 6, 7)
  - [ ] Call register function from useAuth
  - [ ] Handle duplicate email error (409 response)
  - [ ] Navigate to /onboarding on success
- [ ] Add analytics tracking (AC: 8)
  - [ ] Track signup_started on page load
  - [ ] Track signup_completed on success
- [ ] Add navigation links
  - [ ] Link to /sign-in for existing users

## Dev Notes

### Form Validation with Zod
```typescript
import { registerSchema } from '@plpg/shared/validation';

// Validation
const result = registerSchema.safeParse({ email, password, name });
if (!result.success) {
  setError(result.error.errors[0].message);
  return;
}
```

### Password Requirements
- Minimum 8 characters
- At least 1 uppercase letter
- At least 1 number

### Error Handling
- 409 Conflict: "Email already registered"
- 400 Bad Request: Display validation message
- 500 Server Error: "Registration failed. Please try again."

### UI Components
- Use Card, Input, Button, Alert from Shadcn UI
- Form layout with consistent spacing

### Testing
- **Test file location**: `apps/web/src/pages/SignUp.test.tsx`
- **Test standards**: Component tests with user interaction simulation
- **Testing frameworks**: Vitest + @testing-library/react + MSW
- **Coverage target**: >80%

## Definition of Done
- [ ] SignUp page renders at /sign-up route
- [ ] Form validates email format
- [ ] Form enforces password requirements
- [ ] Duplicate email shows clear error message
- [ ] Successful registration redirects to /onboarding
- [ ] Loading state shown during submission
- [ ] Analytics events fire correctly
- [ ] Accessible (keyboard navigation, ARIA labels)

## Unit Test Cases
- Test form renders with all fields
- Test email validation rejects invalid format
- Test password validation rejects weak passwords (< 8 chars)
- Test password validation rejects passwords without uppercase
- Test password validation rejects passwords without number
- Test form submission calls register function
- Test successful registration navigates to /onboarding
- Test duplicate email displays error message
- Test submit button shows loading state

## Change Log
| Date | Version | Description | Author |
|------|---------|-------------|--------|
| 2025-01-08 | 0.1 | Initial story creation | SM Agent |
