# Story 0.5: Frontend App Scaffold (apps/web)

## Status
Draft

## Parent Epic
[Epic 0: Technical Foundation](../epic-0-technical-foundation.md)

## Story
**As a** frontend developer,
**I want** a configured React + Vite application,
**So that** I can start building UI components immediately

## Acceptance Criteria
1. Vite + React 18 + TypeScript configured
2. Tailwind CSS with @plpg/config preset
3. React Router v6 with route structure
4. TanStack Query configured
5. Zustand store scaffolded
6. JWT AuthProvider context configured
7. ESLint + Prettier working

## Tasks / Subtasks
- [ ] Create Vite + React app (AC: 1)
  - [ ] Initialize with `npm create vite@latest`
  - [ ] Configure TypeScript with @plpg/config preset
  - [ ] Set up environment variables (VITE_API_URL)
- [ ] Configure Tailwind with @plpg/config preset (AC: 2)
  - [ ] Install Tailwind CSS
  - [ ] Create tailwind.config.js extending preset
  - [ ] Set up globals.css with Tailwind directives
- [ ] Set up React Router (AC: 3)
  - [ ] Install react-router-dom v6
  - [ ] Create routes.tsx with placeholder pages
  - [ ] Create Landing.tsx and NotFound.tsx pages
- [ ] Configure TanStack Query (AC: 4)
  - [ ] Install @tanstack/react-query
  - [ ] Create queryClient.ts configuration
  - [ ] Wrap app in QueryClientProvider
- [ ] Create Zustand store (AC: 5)
  - [ ] Install zustand
  - [ ] Create uiStore.ts example store
- [ ] Set up API service (AC: 6)
  - [ ] Install axios
  - [ ] Create api.ts with base URL and interceptors
  - [ ] Add auth token injection interceptor
  - [ ] Add 401 redirect interceptor
- [ ] Configure linting (AC: 7)
  - [ ] Create .eslintrc.cjs extending @plpg/config
  - [ ] Configure Prettier

## Dev Notes

### Directory Structure
```
apps/web/
├── public/
│   └── favicon.ico
├── src/
│   ├── components/
│   │   └── .gitkeep
│   ├── pages/
│   │   ├── Landing.tsx
│   │   └── NotFound.tsx
│   ├── hooks/
│   │   └── .gitkeep
│   ├── services/
│   │   └── api.ts           # Axios instance with interceptors
│   ├── stores/
│   │   └── uiStore.ts       # Example Zustand store
│   ├── lib/
│   │   ├── queryClient.ts   # TanStack Query config
│   │   └── utils.ts
│   ├── styles/
│   │   └── globals.css
│   ├── App.tsx
│   ├── main.tsx
│   └── routes.tsx
├── index.html
├── vite.config.ts
├── tailwind.config.js       # Extends @plpg/config/tailwind
├── tsconfig.json            # Extends @plpg/config/typescript/react
├── .eslintrc.cjs            # Extends @plpg/config/eslint/react
└── package.json
```

### API Service Setup
```typescript
import axios from 'axios';

export const api = axios.create({
  baseURL: import.meta.env.VITE_API_URL || 'http://localhost:3001/v1',
  withCredentials: true,
});

api.interceptors.request.use(async (config) => {
  const token = localStorage.getItem('auth_token');
  if (token) {
    config.headers.Authorization = `Bearer ${token}`;
  }
  return config;
});

api.interceptors.response.use(
  (response) => response,
  (error) => {
    if (error.response?.status === 401) {
      window.location.href = '/sign-in';
    }
    return Promise.reject(error);
  }
);
```

### Testing
- **Test file location**: `apps/web/src/**/*.test.tsx`
- **Test standards**: Component tests with Testing Library
- **Testing frameworks**: Vitest + @testing-library/react
- **Environment**: jsdom

## Definition of Done
- [ ] `npm run dev` starts Vite dev server on localhost:5173
- [ ] Tailwind CSS compiles with design tokens
- [ ] React Router navigates between pages
- [ ] TanStack Query provider wraps application
- [ ] Zustand store accessible
- [ ] API service configured with interceptors
- [ ] ESLint and Prettier pass without errors
- [ ] `npm run build` succeeds

## Unit Test Cases
- Test Landing page renders correctly
- Test NotFound page renders 404 message
- Test API interceptor adds auth token to requests
- Test uiStore state updates correctly
- Test queryClient configuration is valid

## Change Log
| Date | Version | Description | Author |
|------|---------|-------------|--------|
| 2025-01-08 | 0.1 | Initial story creation | SM Agent |
